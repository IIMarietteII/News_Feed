<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>뉴스레터 보기</title>
  <link rel="stylesheet" href="common.css">
</head>
<body>
  <h1>📰 선택한 뉴스레터</h1>
  <div id="newsletter">불러오는 중...</div>

  <script>
    const params = new URLSearchParams(location.search);
    const ids = params.get('ids')?.split(',') || [];

  fetch('data/articles.json')
      .then(res => res.json())
      .then(data => {
        const filtered = data.filter(article => ids.includes(encodeURIComponent(article.id)));
        const container = document.getElementById('newsletter');
        container.innerHTML = '';

        if (filtered.length === 0) {
          container.innerHTML = "<p>선택된 기사가 없습니다.</p>";
          return;
        }

        filtered.forEach(article => {
          const div = document.createElement('div');
          div.className = "article";
          div.innerHTML = \`
            <h2><a href="\${article.link}" target="_blank">\${article.title}</a></h2>
            <p><em>\${article.source}</em> | <small>\${article.published}</small></p>
            <p>\${article.summary}</p>
            <hr>
          \`;
          container.appendChild(div);
        });
      });
  </script>
</body>
</html>
